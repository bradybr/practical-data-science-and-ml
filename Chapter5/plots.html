

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>5.2.3. Plots &amp; Graphs &#8212; Practical Data Science and Machine Learning</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Chapter5/plots';</script>
    <link rel="canonical" href="https://bradybr.github.io/practical-data-science-and-ml/intro/Chapter5/plots.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5.3. Data Wrangling" href="wrangling.html" />
    <link rel="prev" title="5.2.2. Data Integrity" href="data_integrity.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/althoff_logo.png" class="logo__image only-light" alt="Practical Data Science and Machine Learning - Home"/>
    <script>document.write(`<img src="../_static/althoff_logo.png" class="logo__image only-dark" alt="Practical Data Science and Machine Learning - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Practical Data Science and Machine Learning
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../Chapter1/introduction.html">1. Introduction</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Chapter1/book_organization.html">1.1. Book Organization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Chapter1/book_objectives.html">1.2. Objectives</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Chapter2/what_is_ds.html">2. What Is Data Science?</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Chapter2/ds_roles.html">2.1. Data Science Roles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Chapter2/ds_tools.html">2.2. Tools Of the Trade</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Chapter2/ds_considerations.html">2.3. Special Considerations</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Chapter3/use_case_examples.html">3. Use Case Examples</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Chapter3/pred_hyd_failure.html">3.1. Predicting Hydraulic Failure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Chapter3/forcst_power.html">3.2. Forecasting Power Consumption</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Chapter3/cust_seg.html">3.3. Customer Segmentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Chapter3/chair_manif.html">3.4. How Many Chairs Should We Make?</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Chapter4/ete_overview.html">4. The Process Cycle</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Chapter4/crisp_dm.html">4.1. CRISP-DM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Chapter4/proj_scoping.html">4.2. Project Ideation &amp; Scoping</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="proj_workflow.html">5. Project Workflow</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="data.html">5.1. Data</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="data_types.html">5.1.1. Data Formats &amp; Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_acquisition.html">5.1.2. Data Acquisition</a></li>
</ul>
</li>
<li class="toctree-l2 current active has-children"><a class="reference internal" href="EDA.html">5.2. Exploratory Data Analysis (EDA)</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="data_characteristics.html">5.2.1. Data Charactersitics</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_integrity.html">5.2.2. Data Integrity</a></li>
<li class="toctree-l3 current active"><a class="current reference internal" href="#">5.2.3. Plots &amp; Graphs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="wrangling.html">5.3. Data Wrangling</a></li>
<li class="toctree-l2"><a class="reference internal" href="feat_engineering.html">5.4. Feature Engineering</a></li>
<li class="toctree-l2"><a class="reference internal" href="modeling.html">5.5. Modeling</a></li>
<li class="toctree-l2"><a class="reference internal" href="validation.html">5.6. Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="UI_UX.html">5.7. UI/UX</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Chapter6/machine_learning.html">6. Machine Learning</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Chapter6/stats_inf.html">6.1. Statistical Inference</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Chapter6/supervised_learning.html">6.2. Supervised Learning</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../Chapter6/classification.html">6.2.1. Classification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Chapter6/forecasting.html">6.2.2. Forecasting</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Chapter6/unsupervised_learning.html">6.3. Unsupervised Learning</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../Chapter6/clustering.html">6.3.1. Clustering</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Chapter6/PCA.html">6.3.2. PCA</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Chapter6/optim.html">6.4. Optimization</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-11"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../Chapter6/combinatorics.html">6.4.1. Combinatorics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Chapter6/linear_programs.html">6.4.2. Linear Programs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Chapter6/genetic_algos.html">6.4.3. Genetic Algorithms</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Chapter6/reinf_learning.html">6.5. Reinforcement Learning</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Chapter6/odds_n_ends.html">6.6. Odds ‘n Ends</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-12"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../Chapter6/stoch_solvers.html">6.6.1. Stochastic Solvers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Chapter6/nlp.html">6.6.2. Natural Language Processing (NLP)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Chapter6/assoc_rules.html">6.6.3. Association Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Chapter6/rec_systems.html">6.6.4. Recommender Systems</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Chapter6/img_detection.html">6.6.5. Image Detection</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Chapter7/math.html">7. Math, Probability, &amp; Statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Chapter8/next.html">8. What Now?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zreferences.html">9. References</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/Chapter5/plots.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>

</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Plots & Graphs</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="plots-graphs">
<h1><span class="section-number">5.2.3. </span>Plots &amp; Graphs<a class="headerlink" href="#plots-graphs" title="Permalink to this heading">#</a></h1>
<p>Time to unleash the right side of your brain!  Truthfuly, we should have been working with plots for the last few sections way more extensively than we have.  Instead of introducing too many topics at once, we intentionally paused delving into the the visual exploration side of things so we could focus on one thing at a time.  Now that the analytical side of EDA is behind us, it’s time to see how adding some visual creativity to your arsenal will pay huge dividends!</p>
<figure class="align-default" id="right-brain-fig">
<a class="reference internal image-reference" href="../_images/right_brain.png"><img alt="../_images/right_brain.png" src="../_images/right_brain.png" style="width: 600px;" /></a>
</figure>
<p>Plots and graphs will come into play at multiple stages during the course of your project.  First, they’ll aid in your EDA journey with the basic understanding of what you’re working with, investigating raw features, and helping to identify if there are any potential issues in the data.  Then once you start moving into feature engineering and transformations you’ll want to begin visualing the changes and relational effects between your variables.  After that, when you start getting into building models and iterating through versions, you’ll need some way to visualize the progress, tuning, and performance of your candidate models.</p>
<p>Up to this point all of the visuals and graphs you’ve been building are purely for your benefit.  They can be as simple and utilitarian, or as pretty as you want them to be.  The main focus during the proof of concept stages is to find a viable solution that works, so they only need to help you in that pursuit.  The next layer of visualizations you’ll need to concern yourself with are external facing.</p>
<p>During the course of a project you’ll have multiple and distinct groups of people you’ll need to communicate with, all at different levels of detail.  You’ll have data science peers that will need to understand the low-level and technical aspects of your program.  You’ll have business sponsors who just want to understand that you solved their problem in some way, and don’t need all of the gory math and technical details.  And finally, you’ll have executive leadership teams who want <em>very</em> simple and high-level details of your success story so they can understand the value you’re bringing to the organization.   As you’ll come to find out, visual graphics are often worth a thousand words, and can go a long way in selling your story to all of these different stakeholders.</p>
<h3>Plotting In Python</h3><p>Before going too far, we need to lay out some of the most popular library options for plotting in Python.  There are many other popular ones you could choose from, but what follows is a pretty typical starting point for your foundational learning.  Expand from here and find out what works for you in practice.</p>
<p>Take a look at the documentation and example galleries from the following to get a taste of what’s possible.</p>
<p><strong><a href="https://matplotlib.org/">Matplotlib</a></strong> is the oldest and still the most popular plotting extension.  No question it works, and you’ll find lots of online support if you need it.  In my opinion, it’s a bit verbose to use as your top level administration though.  There are several packages offering better quality graphics with less code (interestingly enough, probably built on top of matplotlib…).  So the only time I’ll use matplotlib these days is if it’s something <em>extremely</em> simple and I just need one or two lines of code to make it happen.  Other than that, it’ll be one of these others that leverage matplotlib underneath the hood.  Your mileage may vary of course.</p>
<p><strong><a href="https://seaborn.pydata.org/tutorial.html">Seaborn</a></strong> is a library package built on top of matplotlib that addresses most of my gripes with matplotlib.  It’s much more concise coding with better quality results.  I will absolutely use seaborn in my workflow depending on the graph I need, but it’s not my primary library.  I favor what’s known as the “Grammar of Graphics” <span id="id1">[<a class="reference internal" href="../zreferences.html#id15" title="Leland Wilkinson. Grammar of graphics. Springer, 2005.">Wil05</a>]</span>, which is an entirely novel approach to plotting that we’ll get to when we discuss plotnine below.  Having said of all that, seaborn is currently being updated as we speak from it’s core library to a grammar of graphics interface known as <a href="https://seaborn.pydata.org/tutorial/objects_interface.html">seaborn.objects</a>.  I guess the word is out that it’s a superior methodology.  I won’t cover the new seaborn.objects interface here, because frankly, I haven’t taken the time to learn it yet because my needs are met elsewhere.  I have a sneaking suspicion that this library is more actively being developed so I will likely check it out again after it’s fully built out.</p>
<p><strong><a href="https://pandas.pydata.org/">Pandas</a></strong> should sound familiar to you if you’ve been beefing up your coding skills.  The extremely popular pandas library has plotting functionality that chains and works extremely well in any pandas workflow.  I will often use pandas plotting when I’m visualizing a single series or something very simple.  If it’s more than that, I’ll tend to default to my package of choice up next.</p>
<p><strong><a href="https://plotnine.readthedocs.io/en/v0.12.4/#">Plotnine</a></strong> is the current standard for implementing the grammar of graphics for Python.  It’s modeled after the go-to R programming plotting library by Hadley Wickham, ggplot2 <span id="id2">[<a class="reference internal" href="../zreferences.html#id4" title="Hadley Wickham. ggplot2: Elegant Graphics for Data Analysis. Springer-Verlag New York, 2016. ISBN 978-3-319-24277-4. URL: https://ggplot2.tidyverse.org.">Wic16</a>]</span>.  Since I came to Python from R, this was a no-brainer for me.  The value Hadley and team introduced and gave to the analytics community by incorporating this standardized interface cannot be overstated.  It’s a super logical way to build up a plot layer by layer with exactly what you need.  It won’t always be the most concise code, especially for simple plots, but once you learn the syntax you won’t really mind.  Fair enough to say I’m a ggplot fan, and by extension, plotnine.  The only downsides I’ve run into with the plotnine implementation of the logic, is that it’s missing a few of the more advanced things that ggplot in R has, and if you’re looking for interactivity you may want to consider another option such as <a href="https://plotly.com/python/">Plotly</a>.</p>
<p>What follows is not intended to be a tutorial on Python plotting code or techinques, but more generally about the application of plotting methodologies in various stages of your projects.  We will mostly use the plotnine design in this book, but feel free to use whatever works for you.  That’s what’s important.</p>
<p>Ok, now that we have all of that out of the way, let’s talk about how we need to start thinking about plots and graphs.</p>
<h3>Types of Plots</h3><p>First off, you’ll often see the words “plots” and “graphs” used interchangeably, but usually intended to mean the same thing.  These are simply visual graphics of some kind.  Plots more commonly refer to the techinical side of what we’re doing in our application environments, and serve as a catch-all to encompass all kinds of visuals, from proper graphs to images.  Graphs will mostly be referencing the visualization of numeric or categorical data in some way.</p>
<p>Borrowing, and gently updating <a class="reference internal" href="#plot-types-fig"><span class="std std-numref">Fig. 5.3</span></a> below from the <a href="https://seaborn.pydata.org/tutorial.html">Seaborn User Guide and Tutorial</a>, is about as straight forward as I’ve ever seen an illustration laying out the most common graphs and their uses.  There are of course others and more exotic plot types for specific purposes, such as heatmaps, area, autocorrelation plots, 3D graphs, graph networks, images, word clouds, animated/interactive, and so on, but what we’ll reveiw will cover the overwhelming majority of our needs for now.</p>
<figure class="align-default" id="plot-types-fig">
<a class="reference internal image-reference" href="../_images/plot_types.png"><img alt="../_images/plot_types.png" src="../_images/plot_types.png" style="width: 500px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 5.3 </span><span class="caption-text">Source: <a class="reference external" href="https://seaborn.pydata.org/tutorial/function_overview.html">https://seaborn.pydata.org/tutorial/function_overview.html</a></span><a class="headerlink" href="#plot-types-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>For each pillar of plot types, we’ll discuss in more detail when we get to each section, but for now hopefully you can see there are really only a few different reasons you might want to display data graphically, i.e. for Relational, Distributions, and Categorical data.  That’s pretty much it.</p>
<p>You either want to compare some values in some way <strong>(relational)</strong>, investigate the dispersion of a data sample under study <strong>(distributions)</strong>, or you want to visualize <strong>categorical</strong> (non numeric) data some how.  And all of the plot types under each pillar simply give you options and flexibility to respond to the exact pecularities of your actual data.  Honestly, you could probably learn 3 or 4 different types of graphs and be all set for 95% of the analytics we need to perform.  Of course we love having the flexibility and options to really dial in our graphics, but you could get by nonetheless.</p>
<p>We’ll use <a class="reference internal" href="#plot-types-fig"><span class="std std-numref">Fig. 5.3</span></a> as the reference to motivate our examples below.</p>
<p>A couple of final thoughts before jumping in.</p>
<ol class="arabic simple">
<li><p>Begin by thinking about what data you have before worrying about graphs and types of plots</p>
<ul class="simple">
<li><p>What are your numeric variables?  Are there categorical ones (if so, as the main feature, or secondary data that you want to use to hightlight or separate your numeric values in some way)?  Etc.</p></li>
</ul>
</li>
<li><p>Simple is <em>always</em> better</p>
<ul class="simple">
<li><p>It’s generally excepted that going overboard and adding too many dimensions in your graphics is not a good idea(data points, grouping, faceting, color, size, and shape aesthetics all at once)</p></li>
<li><p>Reporting from personal experience, I can tell you it will overwhelm your non technical business people and does more harm than good</p></li>
</ul>
</li>
<li><p>There’s a difference between working and exploratory, and presentation quality graphics</p>
<ul class="simple">
<li><p>For exploratory, if you tried something and it reveals interesting information great, if not that’s ok too, just move on</p></li>
<li><p>For presentation, do not leave anything in your graph that does not add value</p></li>
</ul>
</li>
</ol>
<p>Enough words.  It’ll be easier if we get going with some examples.</p>
<h3>Relational Plots</h3><p>These are probably the most common types of graphs we work with.  Relational means you have some variable of interest you’d like to compare with some other phenomenon, be it another variable(s) or time.  Sounds complicated, but it’s really pretty straightforward.</p>
<p>At the risk of unoriginality, we’ll use the “tips” dataset to work through our examples below.  This popular dataset holds the record of tips received by a waiter over the course of several months.  Features present are the tip amount, bill total, sex/gender of the payer, if any smokers were present in the party, the day of the week, the time of day, and the size of the party.</p>
<p>Let’s take a look.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import PydataSet Library</span>
<span class="kn">from</span> <span class="nn">pydataset</span> <span class="kn">import</span> <span class="n">data</span>

<span class="c1"># Read in the &quot;tips&quot; dataset</span>
<span class="n">dat</span> <span class="o">=</span> <span class="n">data</span><span class="p">(</span><span class="s2">&quot;tips&quot;</span><span class="p">)</span>
<span class="n">dat</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total_bill</th>
      <th>tip</th>
      <th>sex</th>
      <th>smoker</th>
      <th>day</th>
      <th>time</th>
      <th>size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>16.99</td>
      <td>1.01</td>
      <td>Female</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>10.34</td>
      <td>1.66</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>3</td>
    </tr>
    <tr>
      <th>3</th>
      <td>21.01</td>
      <td>3.50</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>23.68</td>
      <td>3.31</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
    <tr>
      <th>5</th>
      <td>24.59</td>
      <td>3.61</td>
      <td>Female</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>4</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p><strong><h5>Scatter Plots</h5></strong></p>
<p>Scatter plots are excellent places to get started because they’re pretty simple, and usually only a couple of variables.  While these types of plots could be used with categorical data such as Week Day on the x axis, it makes much more sense to view the relationships between numeric features.  Here we have three continuous variables in “total_bill”, “tip”, and “size”.</p>
<p>You’ll come to start thinking about your data in terms of primary and secondary, and/or aesthetic variables, meaning information you could use to segment or further subclassify your data to give further contextual information.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load library</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">plotnine</span> <span class="k">as</span> <span class="nn">gg</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>

<span class="c1"># Plot scatterplot</span>
<span class="n">gg</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">gg</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;total_bill&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;tip&#39;</span><span class="p">))</span> <span class="o">+</span> <span class="n">gg</span><span class="o">.</span><span class="n">geom_point</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/270938c9cef81c77766074ed922116223839abb5c8e94a9692b9fb4ae16a83ab.png" src="../_images/270938c9cef81c77766074ed922116223839abb5c8e94a9692b9fb4ae16a83ab.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>Cool.  Our first exploratory plot!  We’re relating the size of each individual <em>tip</em> amount to the overall size of their <em>total bill</em>.  So what can we see?  Maybe you noticed a nice linear trend as the total bill gets larger, generally so does the size of the tip?  Maybe you noticed a few points that do <em>not</em> follow those same general patterns?  Like the anomaly of someone tipping over $5 on a $7 bill?</p>
<p>Good start, but what else could we do here?  Maybe you thought about adding an additional segmentaiton <em>aesthetic</em> using color in some way?  How about if we highlight each point by whether or not it was a male or female?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot simple scatterplot with gender color aesthetic</span>
<span class="n">gg</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">gg</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;total_bill&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;tip&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;sex&#39;</span><span class="p">))</span> <span class="o">+</span> <span class="n">gg</span><span class="o">.</span><span class="n">geom_point</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/a636e79a9dc7699055f12a87790ca988512bc4820252ab3f8a42e655f894f1c2.png" src="../_images/a636e79a9dc7699055f12a87790ca988512bc4820252ab3f8a42e655f894f1c2.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>Hmm… unfortunately looks like pretty uniform dispersion so it doesn’t appear to be too informational.  What if we add linear fit trendlines for each gender?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot with lm fit</span>
<span class="p">(</span><span class="n">gg</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">gg</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;total_bill&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;tip&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;sex&#39;</span><span class="p">))</span> <span class="o">+</span>
     <span class="n">gg</span><span class="o">.</span><span class="n">geom_point</span><span class="p">()</span> <span class="o">+</span>
     <span class="n">gg</span><span class="o">.</span><span class="n">geom_smooth</span><span class="p">(</span><span class="n">method</span> <span class="o">=</span> <span class="s2">&quot;lm&quot;</span><span class="p">,</span> <span class="n">se</span> <span class="o">=</span> <span class="kc">False</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/f671e507a5ed4a00af8b7322c8b93bbd3a567f9b11042364645ea62c7fbc3ab8.png" src="../_images/f671e507a5ed4a00af8b7322c8b93bbd3a567f9b11042364645ea62c7fbc3ab8.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>As we first suspected.  Not much difference based on the sexes; however, the up sloping trendlines do confirm what we first observed in a general up trend of tipping more as the total bill increases.</p>
<p>Let’s move on to segment, or facet, by whether or not each group was a “smoking” group or not, and also we’ll use a coloring aesthetic to highlight the size of each group.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot with lm fit and standard errors</span>
<span class="p">(</span><span class="n">gg</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">gg</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;total_bill&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;tip&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;size&#39;</span><span class="p">))</span> <span class="o">+</span>
     <span class="n">gg</span><span class="o">.</span><span class="n">geom_point</span><span class="p">()</span> <span class="o">+</span>
     <span class="n">gg</span><span class="o">.</span><span class="n">geom_smooth</span><span class="p">(</span><span class="n">method</span> <span class="o">=</span> <span class="s2">&quot;lm&quot;</span><span class="p">)</span> <span class="o">+</span>
     <span class="n">gg</span><span class="o">.</span><span class="n">facet_wrap</span><span class="p">(</span><span class="s1">&#39;smoker&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/00ec6c1a8801121b14111351e7c9fde5affc29346b5050b5c59fca762b35ae07.png" src="../_images/00ec6c1a8801121b14111351e7c9fde5affc29346b5050b5c59fca762b35ae07.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>Anything jump out at you?  There’s a ton of information in this one, but I’ll leave it to you to pick it apart.</p>
<p>Ok, we can’t spend all day on scatterplots, but one more just for fun.  Maybe you had the thought to create a new variable to investigate the tip as a percentage of the total bill instead of just the raw dollar amount?  If so, nicely done.  Let’s try it and see what happens.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create tip % variable</span>
<span class="n">dat</span><span class="p">[</span><span class="s1">&#39;tip_pct&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dat</span><span class="o">.</span><span class="n">tip</span> <span class="o">/</span> <span class="n">dat</span><span class="o">.</span><span class="n">total_bill</span>

<span class="c1"># Plot with &quot;smoker&quot; facet</span>
<span class="p">(</span><span class="n">gg</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">gg</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;total_bill&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;tip_pct&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;tip&#39;</span><span class="p">))</span> <span class="o">+</span>
     <span class="n">gg</span><span class="o">.</span><span class="n">geom_point</span><span class="p">()</span> <span class="o">+</span>
     <span class="n">gg</span><span class="o">.</span><span class="n">geom_smooth</span><span class="p">(</span><span class="n">method</span> <span class="o">=</span> <span class="s2">&quot;lm&quot;</span><span class="p">)</span> <span class="o">+</span>
     <span class="n">gg</span><span class="o">.</span><span class="n">facet_wrap</span><span class="p">(</span><span class="s1">&#39;smoker&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/538510beadc3340b30d7e73abaea4f922617ff86c5328421647848aeb059b8ae.png" src="../_images/538510beadc3340b30d7e73abaea4f922617ff86c5328421647848aeb059b8ae.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>Whoa… the sign of the slopes flipped to negative?!?!  I thought we said as the total bill goes up, so does the tip amount???  Well that’s true, it does, but as we can see the tip as a percentage of the total bill actually decreases as the bill gets larger.  So while yes it’s more money, it’s not keeping up on a linear scale.  Sad to see as I’m sure our waiter deserved better.</p>
<p>Alright we need to move to some other types.  Next up, line plots.</p>
<p><strong><h5>Line Plots</h5></strong></p>
<p>Line plots are pretty straightforward.  These are the stuff of <em>time series</em> data that we discussed in our data types section.  It doesn’t really make sense to connect data point by point if they’re independent observations that have no dependency across time.  Let’s see what we’re talking about by reading in a dataset from the St. Louis Federal Reserve with the following features:</p>
<ul class="simple">
<li><p>DATE - Month</p></li>
<li><p>CPI - Consumer Price Index</p></li>
<li><p>PCE - Personal Consumption Expendature</p></li>
<li><p>AHW - Average Hourly Wage</p></li>
<li><p>CSI - Consumer Sentiment Index</p></li>
</ul>
<p>Recall from our discussion about time series data types, what you should notice straight away is that this data carries a <em>time</em> component.  This is what allows you to connect the points in time over the x-axis.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1"># Read in FRED data from Github</span>
<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://github.com/bradybr/practical-data-science-and-ml/blob/main/datasets/FRED.csv?raw=true&#39;</span>
<span class="n">dat</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s2">&quot;\,&quot;</span><span class="p">)</span>
<span class="n">dat</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>DATE</th>
      <th>CPI</th>
      <th>PCE</th>
      <th>AHW</th>
      <th>CSI</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1/1/2007</td>
      <td>85.832240</td>
      <td>9538.7</td>
      <td>20.59</td>
      <td>96.9</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2/1/2007</td>
      <td>86.165127</td>
      <td>9566.0</td>
      <td>20.68</td>
      <td>91.3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3/1/2007</td>
      <td>86.613197</td>
      <td>9611.7</td>
      <td>20.73</td>
      <td>88.4</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4/1/2007</td>
      <td>86.873093</td>
      <td>9643.6</td>
      <td>20.78</td>
      <td>87.1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5/1/2007</td>
      <td>87.232139</td>
      <td>9685.8</td>
      <td>20.84</td>
      <td>88.3</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Update DATE to datetime</span>
<span class="n">dat</span><span class="p">[</span><span class="s1">&#39;DATE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">dat</span><span class="p">[</span><span class="s1">&#39;DATE&#39;</span><span class="p">])</span>

<span class="c1"># Print statistical summaries</span>
<span class="n">dat</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="n">T</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
      <th>std</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>DATE</th>
      <td>204</td>
      <td>2015-06-16 19:31:45.882352896</td>
      <td>2007-01-01 00:00:00</td>
      <td>2011-03-24 06:00:00</td>
      <td>2015-06-16 00:00:00</td>
      <td>2019-09-08 12:00:00</td>
      <td>2023-12-01 00:00:00</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>CPI</th>
      <td>204.0</td>
      <td>102.634476</td>
      <td>85.83224</td>
      <td>94.436791</td>
      <td>100.202939</td>
      <td>108.037504</td>
      <td>130.307109</td>
      <td>11.143778</td>
    </tr>
    <tr>
      <th>PCE</th>
      <td>204.0</td>
      <td>12820.531373</td>
      <td>9538.7</td>
      <td>10644.0</td>
      <td>12291.65</td>
      <td>14299.025</td>
      <td>19001.7</td>
      <td>2616.071004</td>
    </tr>
    <tr>
      <th>AHW</th>
      <td>204.0</td>
      <td>25.885931</td>
      <td>20.59</td>
      <td>22.9</td>
      <td>24.985</td>
      <td>28.1875</td>
      <td>34.27</td>
      <td>3.694348</td>
    </tr>
    <tr>
      <th>CSI</th>
      <td>203.0</td>
      <td>79.699015</td>
      <td>50.0</td>
      <td>69.85</td>
      <td>79.0</td>
      <td>91.8</td>
      <td>101.4</td>
      <td>13.309146</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We can see that some of these variables are indexes, and others are one very different range scales, so let’s start with just one series before getting too complicated.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># CPI Time Series line plot</span>
<span class="p">(</span><span class="n">gg</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">gg</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;DATE&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;CPI&#39;</span><span class="p">))</span> <span class="o">+</span>
    <span class="n">gg</span><span class="o">.</span><span class="n">geom_line</span><span class="p">(</span><span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;#4E68EC&#39;</span><span class="p">)</span> <span class="o">+</span> 
    <span class="n">gg</span><span class="o">.</span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">&quot;CPI - Consumer Price Index&quot;</span><span class="p">)</span> <span class="o">+</span>  
    <span class="n">gg</span><span class="o">.</span><span class="n">theme</span><span class="p">(</span><span class="n">axis_text_x</span> <span class="o">=</span> <span class="n">gg</span><span class="o">.</span><span class="n">element_text</span><span class="p">(</span><span class="n">rotation</span> <span class="o">=</span> <span class="mi">45</span><span class="p">,</span> <span class="n">hjust</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/a9a77997e2e06043374d1776f52bfe8f5a5b5470e69ea8523cf518b090acd96f.png" src="../_images/a9a77997e2e06043374d1776f52bfe8f5a5b5470e69ea8523cf518b090acd96f.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>Now what if we wanted to plot all 4 of the series together?  Could we do that?  Unfortunately no, not without normalizing or standardizing each individual series to be on the same scale.  Otherwise, the large values of the PCE series would overwhelm the smaller ones and you would not be able to see any variance.  There is another way we can get them all on one plot <em>without</em> adjusting the values though, and it’s called faceting.  Faceting essentially breaks out each series into it’s own plot and then we set the “scales” parameter to “free_y” which allows each plot to set its own y-axis range instead of sharing.</p>
<p>See below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Melt data from wide to long</span>
<span class="n">melted_dat</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">id_vars</span> <span class="o">=</span> <span class="s1">&#39;DATE&#39;</span><span class="p">)</span>

<span class="c1"># Facet Plot</span>
<span class="p">(</span><span class="n">gg</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">melted_dat</span><span class="p">,</span> <span class="n">gg</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;DATE&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;variable&#39;</span><span class="p">))</span> <span class="o">+</span>
    <span class="n">gg</span><span class="o">.</span><span class="n">geom_line</span><span class="p">()</span> <span class="o">+</span>
    <span class="n">gg</span><span class="o">.</span><span class="n">theme</span><span class="p">(</span><span class="n">axis_text_x</span> <span class="o">=</span> <span class="n">gg</span><span class="o">.</span><span class="n">element_text</span><span class="p">(</span><span class="n">rotation</span> <span class="o">=</span> <span class="mi">45</span><span class="p">,</span> <span class="n">hjust</span> <span class="o">=</span> <span class="mi">1</span><span class="p">))</span> <span class="o">+</span>
    <span class="n">gg</span><span class="o">.</span><span class="n">facet_wrap</span><span class="p">(</span><span class="s1">&#39;variable&#39;</span><span class="p">,</span> <span class="n">scales</span> <span class="o">=</span> <span class="s1">&#39;free_y&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/abe7ab53054fbfdd49b7645cd06347d430584c73c81556d21db262a61ee5d5ea.png" src="../_images/abe7ab53054fbfdd49b7645cd06347d430584c73c81556d21db262a61ee5d5ea.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>One more for good measure.  We’re jumping ahead a bit here to feature engineering and transformations, but let’s see how we’d normalize each series so we could get them all on one graph.</p>
<p>There are several ways we could do this, but we’re going to keep it simple and create a normalized index out of each variable.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set the variables to normalize</span>
<span class="nb">vars</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;CPI&#39;</span><span class="p">,</span><span class="s1">&#39;PCE&#39;</span><span class="p">,</span><span class="s1">&#39;AHW&#39;</span><span class="p">,</span><span class="s1">&#39;CSI&#39;</span><span class="p">]</span>

<span class="c1"># Normalize by dividing by the first value of each series</span>
<span class="n">dat</span><span class="p">[</span><span class="nb">vars</span><span class="p">]</span> <span class="o">=</span> <span class="n">dat</span><span class="p">[</span><span class="nb">vars</span><span class="p">]</span><span class="o">.</span><span class="n">div</span><span class="p">(</span><span class="n">dat</span><span class="p">[</span><span class="nb">vars</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="c1"># Melt data from wide to long</span>
<span class="n">melted_dat</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">id_vars</span> <span class="o">=</span> <span class="s1">&#39;DATE&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Normalized Series Plot</span>
<span class="p">(</span><span class="n">gg</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">melted_dat</span><span class="p">,</span> <span class="n">gg</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;DATE&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;variable&#39;</span><span class="p">))</span> <span class="o">+</span>
    <span class="n">gg</span><span class="o">.</span><span class="n">geom_line</span><span class="p">()</span> <span class="o">+</span>
    <span class="n">gg</span><span class="o">.</span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">&quot;Normalized Series&quot;</span><span class="p">)</span> <span class="o">+</span>  
    <span class="n">gg</span><span class="o">.</span><span class="n">theme</span><span class="p">(</span><span class="n">axis_text_x</span> <span class="o">=</span> <span class="n">gg</span><span class="o">.</span><span class="n">element_text</span><span class="p">(</span><span class="n">rotation</span> <span class="o">=</span> <span class="mi">45</span><span class="p">,</span> <span class="n">hjust</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/204794e9d7f1f8f8d9c5b3fd3c61b72caaa0bfcaa80136cd5a27a2af20967073.png" src="../_images/204794e9d7f1f8f8d9c5b3fd3c61b72caaa0bfcaa80136cd5a27a2af20967073.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<h3>Distribution Plots</h3><p>Plots that show the statistical moments of the data in a distribution, or spread, of the data can be extremely helpful in understanding the behavior of our sample under study.  We’ll start with the most common and cover a few lesser used as well.</p>
<p>Continuing with the tips dataset.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Re-read in the tips data &amp; create tip % variable againi</span>
<span class="n">dat</span> <span class="o">=</span> <span class="n">data</span><span class="p">(</span><span class="s2">&quot;tips&quot;</span><span class="p">)</span>
<span class="n">dat</span><span class="p">[</span><span class="s1">&#39;tip_pct&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dat</span><span class="o">.</span><span class="n">tip</span> <span class="o">/</span> <span class="n">dat</span><span class="o">.</span><span class="n">total_bill</span>

<span class="n">dat</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total_bill</th>
      <th>tip</th>
      <th>sex</th>
      <th>smoker</th>
      <th>day</th>
      <th>time</th>
      <th>size</th>
      <th>tip_pct</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>16.99</td>
      <td>1.01</td>
      <td>Female</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
      <td>0.059447</td>
    </tr>
    <tr>
      <th>2</th>
      <td>10.34</td>
      <td>1.66</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>3</td>
      <td>0.160542</td>
    </tr>
    <tr>
      <th>3</th>
      <td>21.01</td>
      <td>3.50</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>3</td>
      <td>0.166587</td>
    </tr>
    <tr>
      <th>4</th>
      <td>23.68</td>
      <td>3.31</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
      <td>0.139780</td>
    </tr>
    <tr>
      <th>5</th>
      <td>24.59</td>
      <td>3.61</td>
      <td>Female</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>4</td>
      <td>0.146808</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p><strong><h5>Histograms</h5></strong></p>
<p>Histograms are probably the most familiar, and the most common to visualize the frequency counts of data series.  These graphs show the frequency of numerical data in the form of vertical rectangles illustrating how many times that value range was observed in the data (higher = more frequent).</p>
<p>Let’s see what the range of values looks like in our “total_bill” variable.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Print summary statistics</span>
<span class="n">dat</span><span class="p">[[</span><span class="s1">&#39;total_bill&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="n">T</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>total_bill</th>
      <td>244.0</td>
      <td>19.785943</td>
      <td>8.902412</td>
      <td>3.07</td>
      <td>13.3475</td>
      <td>17.795</td>
      <td>24.1275</td>
      <td>50.81</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We can see that the average value is around $20 dollars, with the inner quartile range of $13-24.  Now let’s see what this looks like plotted in a historgram.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot histogram</span>
<span class="p">(</span><span class="n">gg</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">gg</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="s1">&#39;total_bill&#39;</span><span class="p">))</span> <span class="o">+</span>
     <span class="n">gg</span><span class="o">.</span><span class="n">geom_histogram</span><span class="p">(</span><span class="n">binwidth</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span> <span class="o">+</span>
     <span class="n">gg</span><span class="o">.</span><span class="n">geom_vline</span><span class="p">(</span><span class="n">xintercept</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mf">1.5</span><span class="p">)</span> <span class="o">+</span> 
     <span class="n">gg</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="s2">&quot;rect&quot;</span><span class="p">,</span> <span class="n">xmin</span> <span class="o">=</span> <span class="mi">13</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="mi">24</span><span class="p">,</span> <span class="n">ymin</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="mi">45</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.4</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="s2">&quot;#4E68EC&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/f9e104d46922d922b6885e8e0cf2573140aaf1eaac11d954cf882701094a3f64.png" src="../_images/f9e104d46922d922b6885e8e0cf2573140aaf1eaac11d954cf882701094a3f64.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>Nice!  That’s pretty much exactly what we see.  Our data is right (positive) skewed, shown in that sweeping tail out to the right of our histogram.  It’s a little hard to see the nuances of the full distribution though because of the “coarseness”.  This is due to the number of chosen bins in the plotting function.  Histograms have a parameter called “bins” that you can adjust to increase or decrease the width of the discrete ranges on the x-axis.  Let’s try making it a little more spread out by adjusting the “binwidth” parameter.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot historgram with more granular &quot;binwidth&quot;</span>
<span class="p">(</span><span class="n">gg</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">gg</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="s1">&#39;total_bill&#39;</span><span class="p">))</span> <span class="o">+</span>
     <span class="n">gg</span><span class="o">.</span><span class="n">geom_histogram</span><span class="p">(</span><span class="n">binwidth</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span>
     <span class="n">gg</span><span class="o">.</span><span class="n">geom_vline</span><span class="p">(</span><span class="n">xintercept</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="mf">1.5</span><span class="p">)</span> <span class="o">+</span> 
     <span class="n">gg</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="s2">&quot;rect&quot;</span><span class="p">,</span> <span class="n">xmin</span> <span class="o">=</span> <span class="mi">13</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="mi">24</span><span class="p">,</span> <span class="n">ymin</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.4</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="s2">&quot;#4E68EC&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/de5e75569b36ad5588b265d329c0667d49f30c6db3d3705fb71dd2fa8013d8dd.png" src="../_images/de5e75569b36ad5588b265d329c0667d49f30c6db3d3705fb71dd2fa8013d8dd.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>Interesting.  See how we lost all of the aggregated groupings?  Historgrams are particular in the number of bins required to really see what’s going on.  When you start wanting to see this kind of granularity, maybe you want the next kind of plot we’ll look at called density plots.</p>
<p><strong><h5>Density Plots</h5></strong></p>
<p>If the aggregated coarseness of the historgram was too much for you, maybe you’re looking for a smoothed version that will nicely show the overall distribution of data.  Enter the density plot.  Here we lose the frequency counts in favor of the probability density funciton of a variable.  Sounds complicated, however the same idea applies as with the histogram where the larger more peaked areas occur more frequently.  Simple as that.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Density plot</span>
<span class="p">(</span><span class="n">gg</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">dat</span><span class="p">)</span> <span class="o">+</span>
     <span class="n">gg</span><span class="o">.</span><span class="n">geom_density</span><span class="p">(</span><span class="n">gg</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="s1">&#39;total_bill&#39;</span><span class="p">),</span> <span class="n">fill</span> <span class="o">=</span> <span class="s2">&quot;#4E68EC&quot;</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="mf">.4</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/90eb1750182c7f1bad9d3ad17c6dedb1be7dc9f461249cf1556f80a5a1d870c6.png" src="../_images/90eb1750182c7f1bad9d3ad17c6dedb1be7dc9f461249cf1556f80a5a1d870c6.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>Let’s overlay our density curve on top of our histogram and see how they compliment each other.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot density curve over the histogram</span>
<span class="p">(</span><span class="n">gg</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">gg</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;total_bill&quot;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">gg</span><span class="o">.</span><span class="n">after_stat</span><span class="p">(</span><span class="s2">&quot;density&quot;</span><span class="p">)))</span> <span class="o">+</span>
     <span class="n">gg</span><span class="o">.</span><span class="n">geom_histogram</span><span class="p">()</span> <span class="o">+</span>
     <span class="n">gg</span><span class="o">.</span><span class="n">geom_density</span><span class="p">(</span><span class="n">fill</span> <span class="o">=</span> <span class="s2">&quot;#4E68EC&quot;</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="mf">.4</span><span class="p">)</span> <span class="o">+</span>
     <span class="n">gg</span><span class="o">.</span><span class="n">scale_fill_discrete</span><span class="p">(</span><span class="n">guide</span> <span class="o">=</span> <span class="kc">False</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/ab1b32bc24e8102b53db1af76b803d8fbc4faf87af6568bb156faaaa6ec0dd49.png" src="../_images/ab1b32bc24e8102b53db1af76b803d8fbc4faf87af6568bb156faaaa6ec0dd49.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>Very nice.  We can see the obvious differences between the two representations, but also where they share the same distributional shape.  Sometimes you don’t need or want to see the frequency steps and jagged jumps, and would prefer to see the smooth curve.</p>
<p>Now, let’s take one last look by visualizing tips and total bill amounts on the same graph overlaying their individual density curves.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1"># Melt dataset from wide to long</span>
<span class="n">melted_dat</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">id_vars</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;sex&#39;</span><span class="p">,</span><span class="s1">&#39;smoker&#39;</span><span class="p">,</span><span class="s1">&#39;day&#39;</span><span class="p">,</span><span class="s1">&#39;time&#39;</span><span class="p">])</span>

<span class="c1"># Plot multiple density plots</span>
<span class="p">(</span><span class="n">gg</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">melted_dat</span><span class="p">[</span><span class="o">~</span><span class="n">melted_dat</span><span class="o">.</span><span class="n">variable</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s1">&#39;tip_pct&#39;</span><span class="p">,</span><span class="s1">&#39;size&#39;</span><span class="p">])],</span> <span class="n">gg</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;variable&#39;</span><span class="p">))</span> <span class="o">+</span>
     <span class="n">gg</span><span class="o">.</span><span class="n">geom_density</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/ae5352cf8c8c5f21dcb596f53a12c4062e0c1f2a107ff7251ebfe5fbbd260b60.png" src="../_images/ae5352cf8c8c5f21dcb596f53a12c4062e0c1f2a107ff7251ebfe5fbbd260b60.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p><strong><h5>Empirical Cumulative Density Function (ECDF)</h5></strong></p>
<p>On to another distribution function that calculates the fraction of observations that are less than or equal to a specific point in the distribution of the sample.  Probability density curves are extremely beneficial when you need to model or simulate from an observed sample (empirical) because a theoretical distribution will not fit or work.</p>
<p>This one is easier to show than to explain so we’ll illustrate by simulating playing a fair coin flipping game that either wins 1 token or losses 1 token with each flip, governed by a 50/50 bernouli distribution.</p>
<p>Each game we’ll start with 10 tokens and will consist of flipping a coin 1,000 times.  We’ll simulate playing the game 100 times.  Each game will terminate either by running out of tokens if we hit zero, or by hitting the maximum number of flips set to 1,000.  For each game, we’ll run a cumulative sum over all of the outcomes, then find the maximum total tokens we held at any one point in each game, and finally we’ll calculate the ECDF on the maximums to understand the probabilty curve of what you could have expected to walk away with on average at your highest point.</p>
<p>Sounds complicated, but it’s actually pretty straight forward in practice.  Check it out below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># Game function that wins +1 or costs us -1 token with each flip of a coin</span>
<span class="k">def</span> <span class="nf">play_fun</span><span class="p">(</span><span class="n">start_amt</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">n_flips</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span> <span class="n">win_prob</span> <span class="o">=</span> <span class="mf">.5</span><span class="p">):</span>
    <span class="n">flips</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">size</span> <span class="o">=</span> <span class="n">n_flips</span><span class="p">,</span> <span class="n">p</span> <span class="o">=</span> <span class="p">[</span><span class="n">win_prob</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">win_prob</span><span class="p">)])</span>
    <span class="n">flips</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">flips</span><span class="p">)</span> <span class="o">+</span> <span class="n">start_amt</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">start_amt</span><span class="p">)</span>

    <span class="c1"># Truncate the series if we hit 0 and ran out of tokens</span>
    <span class="n">lost</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">flips</span><span class="p">)</span> <span class="k">if</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span>
    
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lost</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">flips</span> <span class="o">=</span> <span class="n">flips</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">lost</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="p">]</span>

    <span class="k">return</span><span class="p">(</span><span class="n">flips</span><span class="p">)</span>

<span class="c1"># Play the game n times and find the maximum cumulative total from each time we played the game</span>
<span class="n">n</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">tokens_seq</span> <span class="o">=</span> <span class="p">[</span><span class="n">play_fun</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">n</span><span class="p">)]</span>
<span class="n">max_tokens</span> <span class="o">=</span> <span class="p">[</span><span class="nb">max</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">tokens_seq</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">statsmodels.distributions.empirical_distribution</span> <span class="kn">import</span> <span class="n">ECDF</span>

<span class="c1"># Calculate the empirical cummulative density function &amp; create a dataframe</span>
<span class="n">ecdf</span> <span class="o">=</span> <span class="n">ECDF</span><span class="p">(</span><span class="n">max_tokens</span><span class="p">)</span>
<span class="n">ecdf_dat</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">ecdf</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
                         <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="n">ecdf</span><span class="o">.</span><span class="n">y</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot CDF</span>
<span class="p">(</span><span class="n">gg</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">ecdf_dat</span><span class="p">,</span> <span class="n">gg</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;y&#39;</span><span class="p">))</span> <span class="o">+</span>
    <span class="n">gg</span><span class="o">.</span><span class="n">stat_ecdf</span><span class="p">(</span><span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;#4E68EC&quot;</span><span class="p">)</span> <span class="o">+</span>
    <span class="n">gg</span><span class="o">.</span><span class="n">labs</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;Tokens&quot;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;Cummulative Probability&quot;</span><span class="p">)</span> <span class="o">+</span>
    <span class="n">gg</span><span class="o">.</span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">&quot;ECDF for the Maximum Tokens Held from &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; Simulations&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/5e7106c236163fd277a6326b7c7277d118578aeb95b643febf8023945a921d85.png" src="../_images/5e7106c236163fd277a6326b7c7277d118578aeb95b643febf8023945a921d85.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>Beautiful shape.  What’s so cool about this distribution is that now we can begin to ask some questions about expected outcomes.  Want to know where you should have walked away if you wanted to make a profit?  Given some loss tolerance percentage what you could have won?  Etc.</p>
<p>For example, what if I am pretty risk adverse and wanted to know the probability of actually staying above where we started with 10 tokens?  Easy enough.  Just call our <code class="docutils literal notranslate"><span class="pre">ecdf()</span></code> object with the value you want to know the cummulative probability for.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Retrieve the cumulative probability of the ecdf at the value of 10 tokens</span>
<span class="n">ecdf</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.09
</pre></div>
</div>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<p>Ouch.  Looks like 9% of the time we went straight down and never sat on a profit.  I don’t know about you, but that’s not a game I want to play</p>
</div>
</div>
<p>How do we interpret the graph then?  It’s actually pretty simple.  The cumulative probability shows where some % of the observations were less than that value on the x-axis, and the inverse percentage is how much of the time the observations were greater than that number.</p>
<p>Say you’re actually pretty risk tolerant and you would like to know where you might want to start thinking about cashing out given a 50% chance of reaching that amount?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set container for the cumulative probability we want, and find the token value that corresponds to it</span>
<span class="n">y_prob</span> <span class="o">=</span> <span class="mf">.5</span>
<span class="n">x_val</span> <span class="o">=</span> <span class="n">ecdf_dat</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">ecdf_dat</span><span class="o">.</span><span class="n">y</span> <span class="o">==</span> <span class="n">y_prob</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">]</span>

<span class="c1"># Plot CDF with 50% line indicators</span>
<span class="p">(</span><span class="n">gg</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">ecdf_dat</span><span class="p">,</span> <span class="n">gg</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;y&#39;</span><span class="p">))</span> <span class="o">+</span>
    <span class="n">gg</span><span class="o">.</span><span class="n">stat_ecdf</span><span class="p">(</span><span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;#4E68EC&quot;</span><span class="p">)</span> <span class="o">+</span>
    <span class="n">gg</span><span class="o">.</span><span class="n">geom_segment</span><span class="p">(</span><span class="n">gg</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
                           <span class="n">xend</span> <span class="o">=</span> <span class="n">x_val</span><span class="p">,</span>
                           <span class="n">y</span> <span class="o">=</span> <span class="n">y_prob</span><span class="p">,</span>
                           <span class="n">yend</span> <span class="o">=</span> <span class="n">y_prob</span><span class="p">),</span>
                    <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;maroon&#39;</span><span class="p">)</span> <span class="o">+</span>
    <span class="n">gg</span><span class="o">.</span><span class="n">geom_segment</span><span class="p">(</span><span class="n">gg</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">x_val</span><span class="p">,</span>
                           <span class="n">xend</span> <span class="o">=</span> <span class="n">x_val</span><span class="p">,</span>
                           <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
                           <span class="n">yend</span> <span class="o">=</span> <span class="n">y_prob</span><span class="p">),</span>
                    <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;maroon&#39;</span><span class="p">)</span> <span class="o">+</span>
    <span class="n">gg</span><span class="o">.</span><span class="n">labs</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;Max Tokens&quot;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;Cummulative Probability&quot;</span><span class="p">)</span> <span class="o">+</span>
    <span class="n">gg</span><span class="o">.</span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">&quot;ECDF for the Maximum Tokens Held from &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; Simulations&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/0f64acbae37912ff98ccb30f068f23e3688ec05be59d0a24a7e7e2bfc5549eb1.png" src="../_images/0f64acbae37912ff98ccb30f068f23e3688ec05be59d0a24a7e7e2bfc5549eb1.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<p>Above we can see above that 50% of the time you would fail to reach 22 tokens, and 50% of the time you could expect to exceed it.  Definitely a game of chance, and not one of skill.</p>
</div>
</div>
<p>Which makes sense if you think about it, because we started with 10 tokens and we’re flipping a fair coin, so we should have approximately the same chance of losing 10 tokens as we do gaining 10!</p>
<h3>Categorical Plots</h3><p>And finally, our last grouping of plot types:  Categorical Plots.</p>
<p>These are exactly as they sound, plots for visualizing categorical data in some way.  Some of these will look very familiar to what we’ve seen already, while others may be a little new.  What they’ll all have in common though is categorical aggregation or faceting in some way that allows us to segment by these non numeric groups.</p>
<p>I see no reason to break from using the tips data at this point, so we’ll carry on as we have been.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dat</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total_bill</th>
      <th>tip</th>
      <th>sex</th>
      <th>smoker</th>
      <th>day</th>
      <th>time</th>
      <th>size</th>
      <th>tip_pct</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>16.99</td>
      <td>1.01</td>
      <td>Female</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
      <td>0.059447</td>
    </tr>
    <tr>
      <th>2</th>
      <td>10.34</td>
      <td>1.66</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>3</td>
      <td>0.160542</td>
    </tr>
    <tr>
      <th>3</th>
      <td>21.01</td>
      <td>3.50</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>3</td>
      <td>0.166587</td>
    </tr>
    <tr>
      <th>4</th>
      <td>23.68</td>
      <td>3.31</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
      <td>0.139780</td>
    </tr>
    <tr>
      <th>5</th>
      <td>24.59</td>
      <td>3.61</td>
      <td>Female</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>4</td>
      <td>0.146808</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p><strong><h5>Bar Plots</h5></strong></p>
<p>Bar plots look very similar to histograms, the difference being here we’re not spreading the frequencies of a numeric variable out by its range of values across the x-axis, but rather showing the categorical levels of a feature on the x-axis and the counts on the y-axis.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Counts of categorical levels contained in the &quot;day&quot; feature</span>
<span class="p">(</span><span class="n">gg</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">gg</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;day&#39;</span><span class="p">))</span> <span class="o">+</span>
    <span class="n">gg</span><span class="o">.</span><span class="n">geom_bar</span><span class="p">()</span> <span class="o">+</span>
    <span class="n">gg</span><span class="o">.</span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">&quot;Frequency Counts by Day&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/3192012b74255c021ae8b89e324df8755d5d4b2a9245bafa269055c27e2889d9.png" src="../_images/3192012b74255c021ae8b89e324df8755d5d4b2a9245bafa269055c27e2889d9.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>Of course we can also use the aggregation funtionality within the barplot to show numeric values <em>by</em> these same levels contained within a categorical feature.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Total summed values for &quot;total_bill&quot; by &quot;day&quot;</span>
<span class="p">(</span><span class="n">gg</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">gg</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;day&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;total_bill&#39;</span><span class="p">))</span> <span class="o">+</span>
    <span class="n">gg</span><span class="o">.</span><span class="n">geom_bar</span><span class="p">(</span><span class="n">stat</span> <span class="o">=</span> <span class="s1">&#39;identity&#39;</span><span class="p">)</span> <span class="o">+</span>
    <span class="n">gg</span><span class="o">.</span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">&quot;Total Bill Amounts by Day&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/11a36626b8fd9f7941a1fc89c1cb9530dc5bb54d53841daaba68090b8a57da71.png" src="../_images/11a36626b8fd9f7941a1fc89c1cb9530dc5bb54d53841daaba68090b8a57da71.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p><strong><h5>Boxplots</h5></strong></p>
<p>Boxplots are again similar to some others we’ve seen, namely bar plots and density plots.  We’re essentially using a bar plot layout to view the statistical distribution of the values contained within a feature.  Recall the numeric quantile summaries we’ve been working with?  Well, these are graphical representations of these summaries laid out in a barchart.</p>
<p>How might this work?</p>
<p>Curious if there’s a statistical difference in tipping by day of the week?  We can use boxplots to nicely visualize the differences!  However, before we do, let’s print out the numeric summaries for reference.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Print summary statistics for tips by day </span>
<span class="n">dat</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;day&#39;</span><span class="p">)[</span><span class="s1">&#39;tip&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
    <tr>
      <th>day</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Fri</th>
      <td>19.0</td>
      <td>2.734737</td>
      <td>1.019577</td>
      <td>1.00</td>
      <td>1.9600</td>
      <td>3.000</td>
      <td>3.3650</td>
      <td>4.73</td>
    </tr>
    <tr>
      <th>Sat</th>
      <td>87.0</td>
      <td>2.993103</td>
      <td>1.631014</td>
      <td>1.00</td>
      <td>2.0000</td>
      <td>2.750</td>
      <td>3.3700</td>
      <td>10.00</td>
    </tr>
    <tr>
      <th>Sun</th>
      <td>76.0</td>
      <td>3.255132</td>
      <td>1.234880</td>
      <td>1.01</td>
      <td>2.0375</td>
      <td>3.150</td>
      <td>4.0000</td>
      <td>6.50</td>
    </tr>
    <tr>
      <th>Thur</th>
      <td>62.0</td>
      <td>2.771452</td>
      <td>1.240223</td>
      <td>1.25</td>
      <td>2.0000</td>
      <td>2.305</td>
      <td>3.3625</td>
      <td>6.70</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Boxplot for tips by day</span>
<span class="p">(</span><span class="n">gg</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">gg</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;day&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;tip&#39;</span><span class="p">))</span> <span class="o">+</span>
    <span class="n">gg</span><span class="o">.</span><span class="n">geom_boxplot</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/0eaeaf6080e76af499b551b37dc8401a66a4129a73ee8f122c886ba4809f5165.png" src="../_images/0eaeaf6080e76af499b551b37dc8401a66a4129a73ee8f122c886ba4809f5165.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>Nice.  The minimums and maximums are easily identifiable.  Now, remember the discussion about inner quartile range (25th-75th percentiles)?  Well those are observable in the plot as the outer horizontal lines of the boxes.  The thickest line in the middle of the box is the median value.  And see those vertical lines sticking out above and below each box?  Those are the 1.5x the IQR range we’ve also been discussing as an indication of the upper and lower limits for outliers.  Which leaves the dots beyond those outlier limits.  Can you guess what those are?  Outliers!  Good guess.</p>
<p>We could also do some coloring and additional grouping and faceting if we’d like to get a little more information in one graphic, just don’t forget that <em>simple is always better</em>, as things can get overly complicated super quickly.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot boxplot with size facet and color aesthetic by gender</span>
<span class="p">(</span><span class="n">gg</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">gg</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;day&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;tip&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;sex&#39;</span><span class="p">))</span> <span class="o">+</span>
    <span class="n">gg</span><span class="o">.</span><span class="n">geom_boxplot</span><span class="p">()</span> <span class="o">+</span>
    <span class="n">gg</span><span class="o">.</span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">&quot;Tips by Day, Party Size, and Gender&quot;</span><span class="p">)</span> <span class="o">+</span>
    <span class="n">gg</span><span class="o">.</span><span class="n">facet_wrap</span><span class="p">(</span><span class="s1">&#39;size&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/9a4d6d297d7ddcf8e98541cf1a6b79b2396c015e1aa50f597952b4e8b78716ad.png" src="../_images/9a4d6d297d7ddcf8e98541cf1a6b79b2396c015e1aa50f597952b4e8b78716ad.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p><strong><h5>Violin Plots</h5></strong></p>
<p>Next up is one of my favorite types of plots, but also unfortunately one of the least used by others.  Sad, because it’s really an informative one.</p>
<p>Let’s start with throwing boxplots under the bus first.  Did you happen to notice a potential issue with boxplots?  It’s ok if you did’t catch it.  Yes, these plots show a graphical representation of the numeric distribution of a variable, but they can easily obsfucate the real underlying spread.  Let’s show an example to make this clear.</p>
<p>First, we’ll simulate a bimodal distribution and see what it looks like in a histogram and density curve.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a bimodal distribution</span>
<span class="n">x1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">beta</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
<span class="n">x2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">beta</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span> <span class="s1">&#39;x&#39;</span> <span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">])</span> <span class="p">})</span> 

<span class="c1"># Plot density curve over histogram</span>
<span class="p">(</span><span class="n">gg</span><span class="o">.</span><span class="n">ggplot</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">gg</span><span class="o">.</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">gg</span><span class="o">.</span><span class="n">after_stat</span><span class="p">(</span><span class="s2">&quot;density&quot;</span><span class="p">)))</span> <span class="o">+</span>
     <span class="n">gg</span><span class="o">.</span><span class="n">geom_histogram</span><span class="p">(</span><span class="n">binwidth</span> <span class="o">=</span> <span class="mf">.1</span><span class="p">)</span> <span class="o">+</span>
     <span class="n">gg</span><span class="o">.</span><span class="n">geom_density</span><span class="p">(</span><span class="n">fill</span> <span class="o">=</span> <span class="s2">&quot;#4E68EC&quot;</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="mf">.4</span><span class="p">)</span> <span class="o">+</span>
     <span class="n">gg</span><span class="o">.</span><span class="n">scale_fill_discrete</span><span class="p">(</span><span class="n">guide</span> <span class="o">=</span> <span class="kc">False</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/30f816ddc0c1a2cfbd5d77f16e474974eac1f773559dfa7c75864a4a3ba61507.png" src="../_images/30f816ddc0c1a2cfbd5d77f16e474974eac1f773559dfa7c75864a4a3ba61507.png" />
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure Size: (640 x 480)&gt;
</pre></div>
</div>
</div>
</div>
<p>Now, let’s use the same data and print the numeric summary statistics, and then plot a boxplot and violin plot side by side to visualize.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Print summary statistics</span>
<span class="n">X</span><span class="p">[[</span><span class="s1">&#39;x&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="n">T</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>x</th>
      <td>200.0</td>
      <td>0.502224</td>
      <td>0.306456</td>
      <td>0.007881</td>
      <td>0.207114</td>
      <td>0.499413</td>
      <td>0.796199</td>
      <td>0.971397</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="o">%</span><span class="k">matplotlib</span> inline

<span class="c1"># Plot a boxplot and violin plot sharing the same y-axis</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">sharey</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">X</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">sns</span><span class="o">.</span><span class="n">violinplot</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">split</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">inner</span> <span class="o">=</span> <span class="s2">&quot;quart&quot;</span><span class="p">,</span> <span class="n">cut</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">X</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Axes: ylabel=&#39;x&#39;&gt;
</pre></div>
</div>
<img alt="../_images/d5be9042a78ffdd7d4604221779b0ee9b083019f2ca8803fba5549b5c8cae8ab.png" src="../_images/d5be9042a78ffdd7d4604221779b0ee9b083019f2ca8803fba5549b5c8cae8ab.png" />
</div>
</div>
<p>Very very interesting.  Hopefully you can see the clear differences.  Would you really have been able to understand the distribution of data from the boxplot by itself?  The new violin plot clearly shows the underlying distribution much better than the boxplot does.  It’s essentially a density plot turned on it’s side with the quartiles overlaid.  Super informative.</p>
<p>This example is just a simple caution.  While boxplots are awesome and super helpful, they can also easily hide distributional information if the data is non-normal.  And this isn’t to say violin plots are infallable either.  Simply understand every plot type has its strengths and weaknesses, and try not to fall in love with just one type and you’ll be fine.</p>
<p>Back to violin plots.  We can do some very cool things with these by splitting, coloring, and faceting.  Here’s just a taste below if you wanted to see the difference in tipping percentage by gender, and whether or not they were in a party with a smoker.  It would be nearly impossible to see this same amount of information in such a succient way in a boxplot.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot split violin plot</span>
<span class="n">sns</span><span class="o">.</span><span class="n">violinplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">dat</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;smoker&quot;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;tip_pct&quot;</span><span class="p">,</span> <span class="n">hue</span> <span class="o">=</span> <span class="s2">&quot;sex&quot;</span><span class="p">,</span> <span class="n">inner</span> <span class="o">=</span> <span class="s2">&quot;quart&quot;</span><span class="p">,</span> <span class="n">split</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Axes: xlabel=&#39;smoker&#39;, ylabel=&#39;tip_pct&#39;&gt;
</pre></div>
</div>
<img alt="../_images/23c90d28bba71062f40143828bc4132fd424c0c77224d92fdbb7ac9d443359ef.png" src="../_images/23c90d28bba71062f40143828bc4132fd424c0c77224d92fdbb7ac9d443359ef.png" />
</div>
</div>
<p><strong><h5>Mosaic Plots</h5></strong></p>
<p>And now our final plot type we’re going to show: Mosiac Plots.</p>
<p>Mosaic plots are awesome and simple ways to plot multiple categorical variables against each other.  Under the hood, mosiac plots are leveraging what’s known as <em>crosstabs</em>, which caluclate the overlapping percentages amongst the categorical groups.</p>
<p>Let’s see how it works using the sex and day variables in the tips data.  First, we show a crosstab table to illustrate the actual numbers behind the graph.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Print the crosstab table for sex and day</span>
<span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">dat</span><span class="p">[</span><span class="s1">&#39;sex&#39;</span><span class="p">],</span> <span class="n">dat</span><span class="p">[</span><span class="s1">&#39;day&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>day</th>
      <th>Fri</th>
      <th>Sat</th>
      <th>Sun</th>
      <th>Thur</th>
    </tr>
    <tr>
      <th>sex</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Female</th>
      <td>9</td>
      <td>28</td>
      <td>18</td>
      <td>32</td>
    </tr>
    <tr>
      <th>Male</th>
      <td>10</td>
      <td>59</td>
      <td>58</td>
      <td>30</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>And now the mosaic plot, which is just a graphical representation of the crosstable counts above.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">statsmodels.graphics.mosaicplot</span> <span class="kn">import</span> <span class="n">mosaic</span>

<span class="c1"># Plot 2 feature mosaic plot</span>
<span class="n">mosaic</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;sex&#39;</span><span class="p">,</span> <span class="s1">&#39;day&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/230f4af8be94caa8e21830bd0e069da45fcf7c078077ecaff533b4c1161b9d3e.png" src="../_images/230f4af8be94caa8e21830bd0e069da45fcf7c078077ecaff533b4c1161b9d3e.png" />
</div>
</div>
<h3>What Did We Learn?</h3><p>Another long one, I know.  But there’s so many different ways to visualize your data and we wanted to try to expose you to as many useful methodologies as possible.  You’ll start to get comfortable and settle on your plotting library and syntax preferences over time, and with practice you’ll be able to quickly associate the different plot types with the specifics of your data at hand.  And as you begin trying these out for yourself, you’ll run across problems and new details you’d like to dial in and tweak.  Google, Stack Overflow, and the library documentations will again come to your rescue.</p>
<p>The last thought to leave you with is that you’ll quickly come to realize there are many dimensions you can force into a graph, but just because we can doesn’t mean we should.  Graphs should not be complicated or confusing.  The point you’re trying to make should jump out of the image at the viewer, and rarely should require any outside explanation.</p>
<p>Remember, <em>simple is always better</em>.</p>
<p>Happy plotting.</p>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./Chapter5"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="data_integrity.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">5.2.2. </span>Data Integrity</p>
      </div>
    </a>
    <a class="right-next"
       href="wrangling.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">5.3. </span>Data Wrangling</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Brian Brady
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>